<h2>Login</h2>
<!-- 
  [formGroup] binds the form element to our loginForm FormGroup in the component.
  (ngSubmit) calls our onSubmit method when the form is submitted.
-->
<form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <label for="username">Username</label>
    <!-- formControlName links this input to the 'username' FormControl -->
    <input id="username" type="text" formControlName="username" class="form-control">
    
    <!-- Display validation errors -->
    @if (username?.invalid && (username?.dirty || username?.touched)) {
      <div class="alert alert-danger">
        @if (username?.errors?.['required']) { <div>Username is required.</div> }
        @if (username?.errors?.['minlength']) { <div>Username must be at least 3 characters long.</div> }
      </div>
    }
  </div>

  <div class="form-group">
    <label for="password">Password</label>
    <div class="password-wrapper">
      <!-- The input type is now bound to the passwordVisible property -->
      <input id="password" [type]="passwordVisible ? 'text' : 'password'" formControlName="password" class="form-control">
      <!-- This button toggles the visibility -->
      <button type="button" class="btn btn-light" (click)="togglePasswordVisibility()">
        {{ passwordVisible ? 'Hide' : 'Show' }} Password
      </button>
    </div>
    
    <input id="password" type="password" formControlName="password" class="form-control">
  </div>

  <button type="submit" class="btn btn-primary" [disabled]="loginForm.invalid">Login</button>
</form>